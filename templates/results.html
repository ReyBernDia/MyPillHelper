{% extends 'base.html' %}

{% block title %} Medication Results {% endblock %}

{% block content %}


<h1> Select your medication for more information</h1>

<div>
<ul>
 {% for key, value in med_options.items() %}

    
    <div class="container-fluid" id="med_results"> 
      <a href="/more_info/{{value[0]}}">
      <p id="med_name"> Medication Name: {{ value[0] }} </p> 
      <p> Strength: {{ key }} </p> 
      <img src="{{ value[1][0] }}" width=40% height=40%>
      </a>
    </div> 
    
  {% endfor %}

</ul>
</div>
<!--     <script>

      document.addEventListener('DOMContentLoaded', () => {
        $('#med_results').on('click', queryApi)
      
      function queryApi() {
          console.log('hii I am in event listener');
          let med_name = document.getElementById("med_name_id");
         
          let entry = {
              med_name: med_name.value
          };

          fetch(`${window.origin}/more_info`, {
              method: "POST",
              credentials: "include",
              body: JSON.stringify(entry),
              cache: "no-cache",
              headers: new Headers({
                "content-type": "application/json"
              })
            })
            .then(function(response) {
              if (response.status !== 200) {
                console.log(`Looks like there was a problem. Status code: ${response.status}`);
                return;
              }
              response.json().then(function(data) {
                console.log(data);
              });
            })
            .catch(function(error) {
              console.log("Fetch error: " + error);
          });
        };
      });
  </script> -->
 
{% endblock %}